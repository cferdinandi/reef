/*! Reef v10.0.0 | (c) 2021 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/reef */
let e=!1;function t(t){e&&console.warn("[Reef] "+t)}function n(e,t={},n=document){let o=new CustomEvent("reef:"+e,{bubbles:!0,cancelable:!0,detail:t});return n.dispatchEvent(o)}function o(e){let t=Object.prototype.toString.call(e).slice(8,-1).toLowerCase();return"object"===t?function(){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=o(e[n]));return t}():"array"===t?e.map((function(e){return o(e)})):e}function r(e){return["false","null","undefined","0","-0","NaN","0n","-0n"].includes(e)}let i=["input","option","textarea"],l=["value","checked","selected"],c=["checked","selected"];function d(e,t){let n=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!n.includes("javascript:")&&!n.includes("data:text/html"))||(!!e.startsWith("on")||void 0)}function u(e,t,n){d(t,n)||(l.includes(t)&&(e[t]="value"===t?n:" "),e.setAttribute(t,n))}function a(e,t){l.includes(t)&&(e[t]=""),e.removeAttribute(t)}function s(e){if(1===e.nodeType){for(let{name:t,value:n}of e.attributes){if(d(t,n)){a(e,t);continue}if("reef-"!==t.slice(0,5))continue;let o=t.replace("reef-default-","").replace("reef-","");a(e,t),c.includes(o)&&r(n)||u(e,o,n)}if(e.childNodes)for(let t of e.childNodes)s(t)}}function f(e){return e.childNodes&&e.childNodes.length?null:e.textContent}function h(e,t){return e.nodeType!==t.nodeType||e.tagName!==t.tagName||e.id!==t.id||e.src!==t.src}function m(e,t){let n=e.childNodes,o=t.childNodes;(function(e){let t=e.querySelectorAll("script");for(let e of t)e.remove()})(e)||(n.forEach((function(e,n){if(!o[n])return s(e),void t.append(e.cloneNode(!0));if(h(e,o[n])){let t=function(e,t,n){return Array.from(t).slice(n+1).find((function(t){return!h(e,t)}))}(e,o,n);if(!t)return s(e),void o[n].before(e.cloneNode(!0));o[n].before(t)}let d=f(e);if(d&&d!==f(o[n])&&(o[n].textContent=d),function(e,t){if(1!==e.nodeType)return;let n=e.attributes,o=t.attributes;for(let{name:o,value:d}of n){if("reef-default-"===o.slice(0,13))continue;if(l.includes(o)&&i.includes(e.tagName.toLowerCase()))continue;let n=o.replace("reef-","");c.includes(n)&&r(d)?a(t,n):u(t,n,d)}for(let{name:e,value:r}of o)n[e]||l.includes(e)&&i.includes(t.tagName.toLowerCase())||a(t,e)}(e,o[n]),e.childNodes.length||!o[n].childNodes.length){if(!o[n].childNodes.length&&e.childNodes.length){let t=document.createDocumentFragment();return m(e,t),void o[n].appendChild(t)}e.childNodes.length&&m(e,o[n])}else o[n].innerHTML=""})),function(e,t){let n=e.length-t.length;if(!(n<1))for(;n>0;n--)e[e.length-1].remove()}(o,n))}function p(e,r={}){if(!e&&!r.lagoon)return t("Element not found.");if(!r.template&&!r.lagoon)return t("Please provide a template function.");let{data:i,store:l,template:c,isStore:d,setters:u}=r;Object.defineProperties(this,{_elem:{get:function(){return"string"==typeof e?document.querySelector(e):e}},_store:{value:l},_template:{value:c},_debounce:{value:!1,writable:!0},data:{get:function(){return l?Object.assign(l.data,o(i)):o(i)}},do:{value:function(e,...n){return u?u[e]?(u[e].apply(this,[i,...n]),(o=this)._debounce&&window.cancelAnimationFrame(o.debounce),void(o._debounce=window.requestAnimationFrame((function(){o.render()})))):t(`No setter named "${e}".`):t("No setters for this component.");var o}}}),n("initialized",this)}p.prototype.html=function(){let e="string"==typeof this._elem?document.querySelector(this._elem):this._elem;return this._template(this.data,e)},p.prototype.render=function(){let e=this._elem;return e?n("before-render",this.data,e)?(m(function(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.head&&t.head.childNodes&&t.head.childNodes.length>0&&Array.from(t.head.childNodes).reverse().forEach((function(e){t.body.insertBefore(e,t.body.firstChild)})),t.body||document.createElement("body")}(this._template(this.data,e)),e),n("render",this.data,e),e):void 0:t("Render target not found.")},p.debug=function(t){e=!!t},p.clone=o,n("ready");export default p;
