/*! reef v11.0.0BETA | (c) 2021 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/reef */
define(["exports"],(function(e){"use strict";function t(e){e._debounce&&window.cancelAnimationFrame(e.debounce),e._debounce=window.requestAnimationFrame((function(){for(let t of e.fns)t.call(e)}))}function n(e,n){return"object"==typeof e&&(e=new Proxy(e,function e(n){return{get:function(t,o){return"object"==typeof t[o]?new Proxy(t[o],e(n)):t[o]},set:function(e,o,i){return e[o]===i||(e[o]=i,t(n)),!0},deleteProperty:function(e,o){return delete e[o],t(n),!0}}}(n))),e}function o(e){e=n(e,this),this._debounce=null,Object.defineProperties(this,{data:{get:function(){return e},set:function(o){return e=n(o,this),t(this),!0}},fns:{value:[]}})}function i(e){return(new DOMParser).parseFromString(e,"text/html").body||document.createElement("body")}function r(e,t){function n(e,t){let n=t.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!n.includes("javascript:")&&!n.includes("data:"))||(!!e.startsWith("on")||void 0)}function o(e){let t=e.attributes;for(let{name:o,value:i}of t)n(o,i)&&e.removeAttribute(o)}let r=i(e);return function(e){let t=e.querySelectorAll("script");for(let e of t)e.remove()}(r),function e(t){let n=t.children;for(let t of n)o(t),e(t)}(r),t?r:r.innerHTML}function u(e){return["false","null","undefined","0","-0","NaN","0n","-0n"].includes(e)}o.prototype.do=function(...e){for(let t of e)this.fns.includes(t)||this.fns.push(t)},o.prototype.stop=function(...e){for(let t of e){let e=this.fns.indexOf(t);if(e<0)return;this.fns.splice(e,1)}},o.prototype.run=function(){t(this)};let f=["input","option","textarea"],c=["value","checked","selected"],l=["checked","selected"];function d(e,t,n){c.includes(t)&&(e[t]="value"===t?n:" "),e.setAttribute(t,n)}function s(e,t){c.includes(t)&&(e[t]=""),e.removeAttribute(t)}function a(e){if(1===e.nodeType){for(let{name:t,value:n}of e.attributes){if("reef-"!==t.slice(0,5))continue;let o=t.replace("reef-default-","").replace("reef-","");s(e,t),l.includes(o)&&u(n)||d(e,o,n)}if(e.childNodes)for(let t of e.childNodes)a(t)}}function h(e){return e.childNodes&&e.childNodes.length?null:e.textContent}function p(e,t){return e.nodeType!==t.nodeType||e.tagName!==t.tagName||e.id!==t.id||e.src!==t.src}function m(e,t){let n=e.childNodes,o=t.childNodes;n.forEach((function(e,n){if(!o[n])return a(e),void t.append(e.cloneNode(!0));if(p(e,o[n])){let t=function(e,t,n){return Array.from(t).slice(n+1).find((function(t){return!p(e,t)}))}(e,o,n);if(!t)return a(e),void o[n].before(e.cloneNode(!0));o[n].before(t)}let i=h(e);if(i&&i!==h(o[n])&&(o[n].textContent=i),function(e,t){if(1!==e.nodeType)return;let n=e.attributes,o=t.attributes;for(let{name:o,value:i}of n){if("reef-default-"===o.slice(0,13))continue;if(c.includes(o)&&f.includes(e.tagName.toLowerCase()))continue;let n=o.replace("reef-","");l.includes(n)&&u(i)?s(t,n):d(t,n,i)}for(let{name:e,value:i}of o)n[e]||c.includes(e)&&f.includes(t.tagName.toLowerCase())||s(t,e)}(e,o[n]),e.childNodes.length||!o[n].childNodes.length){if(!o[n].childNodes.length&&e.childNodes.length){let t=document.createDocumentFragment();return m(e,t),void o[n].appendChild(t)}e.childNodes.length&&m(e,o[n])}else o[n].innerHTML=""})),function(e,t){let n=e.length-t.length;if(!(n<1))for(;n>0;n--)e[e.length-1].remove()}(o,n)}e.Store=o,e.diff=function(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw"Element not found: "+e;return function(){m(r(t(this.data),!0),n)}},e.diffUnsafe=function(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw"Element not found: "+e;return function(){m(i(t(this.data)),n)}},e.html=function(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw"Element not found: "+e;return function(){n.innerHTML=r(t(this.data))}},e.htmlUnsafe=function(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw"Element not found: "+e;return function(){n.innerHTML=t(this.data)}},e.text=function(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw"Element not found: "+e;return function(){n.textContent=t(this.data)}},Object.defineProperty(e,"__esModule",{value:!0})}));
